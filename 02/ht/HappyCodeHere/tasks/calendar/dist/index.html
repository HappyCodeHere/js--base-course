<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Calendar</title>
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <!-- <link rel="stylesheet" href="css/main.css"> -->
  <link rel="shortcut icon" href="https://upload.wikimedia.org/wikipedia/en/8/8d/Calendar_Icon.png">

  <style>
    tbody .delete{font-weight:700;margin-left:10px;position:relative;top:-5px;color:rgba(244,190,200,0);cursor:pointer}tbody .event{text-align:left;-webkit-animation-name:eventApear;animation-name:eventApear;-webkit-animation-duration:.5s;animation-duration:.5s}tbody .event:hover .delete{transition:color .7s;color:red}@-webkit-keyframes eventApear{from{-webkit-transform:rotateZ(90deg);transform:rotateZ(90deg)}to{-webkit-transform:rotateZ(0);transform:rotateZ(0)}}@keyframes eventApear{from{-webkit-transform:rotateZ(90deg);transform:rotateZ(90deg)}to{-webkit-transform:rotateZ(0);transform:rotateZ(0)}}.calendar-head{margin:0 auto;width:30%}.calendar-head h2{text-align:center}.calendar-head div{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:15px 0}.calendar-head div .btn-control{display:block;color:#bef2df;cursor:pointer;font-weight:700;font-size:30px}.calendar-head div .btn-control:hover{color:#ed2f5d}.calendar-head div .date{font-size:20px;padding:0 100px}table{text-align:center;-webkit-animation-name:tableanimate;animation-name:tableanimate;-webkit-animation-duration:1.5s;animation-duration:1.5s}table th{text-align:center!important;border-bottom:none!important}table tbody td:hover{border:none;color:#fff;background:#29c9c9}@-webkit-keyframes tableanimate{from{-webkit-transform:rotateY(90deg);transform:rotateY(90deg)}to{-webkit-transform:rotateY(0);transform:rotateY(0)}}@keyframes tableanimate{from{-webkit-transform:rotateY(90deg);transform:rotateY(90deg)}to{-webkit-transform:rotateY(0);transform:rotateY(0)}}body{padding:0 200px;padding-top:50px;background:linear-gradient(to right bottom,#be79f5,#0abda4) center center no-repeat;min-height:1000px;-webkit-perspective:1500px;perspective:1500px}.my-calendar{margin:40px 0;background:#fff;box-shadow:1px 1px 5px #000;padding:30px 50px;min-height:500px}
    /*# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFJRSxjQUNFLFlBQUEsSUFDQSxZQUFBLEtBQ0EsU0FBQSxTQUNBLElBQUEsS0FDQSxNQUFBLG9CQUNBLE9BQUEsUUFSSixhQVlJLFdBQUEsS0FDQSx1QkFBQSxXQUFBLGVBQUEsV0FDQSwyQkFBQSxJQUFBLG1CQUFBLElBR0UsMkJBQ0UsV0FBQSxNQUFBLElBQ0EsTUFBQSxJQU1SLDhCQUNFLEtBQ0Usa0JBQUEsZUFBQSxVQUFBLGVBSUYsR0FDRSxrQkFBQSxXQUFBLFVBQUEsWUFQSixzQkFDRSxLQUNFLGtCQUFBLGVBQUEsVUFBQSxlQUlGLEdBQ0Usa0JBQUEsV0FBQSxVQUFBLFlBS0osZUFDRSxPQUFBLEVBQUEsS0FDQSxNQUFBLElBRkYsa0JBS0ksV0FBQSxPQUdGLG1CQUNFLFFBQUEsWUFBQSxRQUFBLFlBQUEsUUFBQSxLQUNBLGlCQUFBLE9BQUEsY0FBQSxPQUFBLGdCQUFBLE9BQ0Esa0JBQUEsT0FBQSxlQUFBLE9BQUEsWUFBQSxPQUVBLE9BQUEsS0FBQSxFQUVBLGdDQUNFLFFBQUEsTUFDQSxNQUFBLFFBQ0EsT0FBQSxRQUNBLFlBQUEsSUFDQSxVQUFBLEtBcEJOLHNDQXVCUSxNQUFBLFFBdkJSLHlCQTRCTSxVQUFBLEtBQ0EsUUFBQSxFQUFBLE1BUU4sTUFDRSxXQUFBLE9BSUEsdUJBQUEsYUFBQSxlQUFBLGFBQ0EsMkJBQUEsS0FBQSxtQkFBQSxLQUVBLFNBQ0UsV0FBQSxpQkFDQSxjQUFBLGVBS0EscUJBR0ksT0FBQSxLQUNBLE1BQUEsS0FDQSxXQUFBLFFBTVIsZ0NBQ0UsS0FDRSxrQkFBQSxlQUFBLFVBQUEsZUFHRixHQUNFLGtCQUFBLFdBQUEsVUFBQSxZQU5KLHdCQUNFLEtBQ0Usa0JBQUEsZUFBQSxVQUFBLGVBR0YsR0FDRSxrQkFBQSxXQUFBLFVBQUEsWUFJSixLQUNFLFFBQUEsRUFBQSxNQUNBLFlBQUEsS0FDQSxXQUFBLGlEQUFBLE9BQUEsT0FBQSxVQUNBLFdBQUEsT0FDQSxvQkFBQSxPQUFBLFlBQUEsT0FJRixhQUNFLE9BQUEsS0FBQSxFQUNBLFdBQUEsS0FDQSxXQUFBLElBQUEsSUFBQSxJQUFBLEtBQ0EsUUFBQSxLQUFBLEtBQ0EsV0FBQSIsImZpbGUiOiJtYWluLmNzcyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG5cclxudGJvZHkge1xyXG5cclxuICAuZGVsZXRlIHtcclxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gICAgbWFyZ2luLWxlZnQ6IDEwcHg7XHJcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbiAgICB0b3A6IC01cHg7XHJcbiAgICBjb2xvcjogcmdiYSgyNDQsIDE5MCwgMjAwLCAwKTtcclxuICAgIGN1cnNvcjogcG9pbnRlcjtcclxuICB9XHJcblxyXG4gIC5ldmVudCB7XHJcbiAgICB0ZXh0LWFsaWduOiBsZWZ0O1xyXG4gICAgYW5pbWF0aW9uLW5hbWU6IGV2ZW50QXBlYXI7XHJcbiAgICBhbmltYXRpb24tZHVyYXRpb246IDAuNXM7XHJcblxyXG4gICAgJjpob3ZlciB7XHJcbiAgICAgIC5kZWxldGUge1xyXG4gICAgICAgIHRyYW5zaXRpb246IGNvbG9yIDcwMG1zO1xyXG4gICAgICAgIGNvbG9yOiByZWQ7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbkBrZXlmcmFtZXMgZXZlbnRBcGVhciB7XHJcbiAgZnJvbSB7XHJcbiAgICB0cmFuc2Zvcm06IHJvdGF0ZVooOTBkZWcpO1xyXG5cclxuICB9XHJcblxyXG4gIHRvIHtcclxuICAgIHRyYW5zZm9ybTogcm90YXRlWigwZGVnKTtcclxuICB9XHJcblxyXG59XHJcblxyXG4uY2FsZW5kYXItaGVhZCB7XHJcbiAgbWFyZ2luOiAwIGF1dG87XHJcbiAgd2lkdGg6IDMwJTtcclxuXHJcbiAgaDIge1xyXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gIH1cclxuXHJcbiAgZGl2IHtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcblxyXG4gICAgbWFyZ2luOiAxNXB4IDA7XHJcblxyXG4gICAgLmJ0bi1jb250cm9sIHtcclxuICAgICAgZGlzcGxheTogYmxvY2s7XHJcbiAgICAgIGNvbG9yOiByZ2IoMTkwLCAyNDIsIDIyMyk7XHJcbiAgICAgIGN1cnNvcjogcG9pbnRlcjtcclxuICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbiAgICAgIGZvbnQtc2l6ZTogMzBweDtcclxuXHJcbiAgICAgICY6aG92ZXIge1xyXG4gICAgICAgIGNvbG9yOiAjZWQyZjVkO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLmRhdGUge1xyXG4gICAgICBmb250LXNpemU6IDIwcHg7XHJcbiAgICAgIHBhZGRpbmc6IDAgMTAwcHg7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5cclxuXHJcblxyXG50YWJsZSB7XHJcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG5cclxuXHJcblxyXG4gIGFuaW1hdGlvbi1uYW1lOiB0YWJsZWFuaW1hdGU7XHJcbiAgYW5pbWF0aW9uLWR1cmF0aW9uOiAxLjVzO1xyXG5cclxuICB0aCB7XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXIgIWltcG9ydGFudDtcclxuICAgIGJvcmRlci1ib3R0b206IG5vbmUgIWltcG9ydGFudDtcclxuXHJcbiAgfVxyXG5cclxuICB0Ym9keSB7XHJcbiAgICB0ZCB7XHJcblxyXG4gICAgICAmOmhvdmVyIHtcclxuICAgICAgICBib3JkZXI6IG5vbmU7XHJcbiAgICAgICAgY29sb3I6IHdoaXRlO1xyXG4gICAgICAgIGJhY2tncm91bmQ6ICMyOWM5Yzk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbkBrZXlmcmFtZXMgdGFibGVhbmltYXRlIHtcclxuICBmcm9tIHtcclxuICAgIHRyYW5zZm9ybTogcm90YXRlWSg5MGRlZyk7XHJcbiAgfVxyXG5cclxuICB0byB7XHJcbiAgICB0cmFuc2Zvcm06IHJvdGF0ZVkoMGRlZyk7XHJcbiAgfVxyXG59XHJcblxyXG5ib2R5IHtcclxuICBwYWRkaW5nOiAwIDIwMHB4O1xyXG4gIHBhZGRpbmctdG9wOiA1MHB4O1xyXG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCh0byByaWdodCBib3R0b20sIHJnYigxOTAsIDEyMSwgMjQ1KSwgcmdiKDEwLCAxODksIDE2NCkpIGNlbnRlciBjZW50ZXIgbm8tcmVwZWF0O1xyXG4gIG1pbi1oZWlnaHQ6IDEwMDBweDtcclxuICBwZXJzcGVjdGl2ZTogMTUwMHB4O1xyXG5cclxufVxyXG5cclxuLm15LWNhbGVuZGFyIHtcclxuICBtYXJnaW46IDQwcHggMDtcclxuICBiYWNrZ3JvdW5kOiB3aGl0ZTtcclxuICBib3gtc2hhZG93OiAxcHggMXB4IDVweCAjMDAwO1xyXG4gIHBhZGRpbmc6IDMwcHggNTBweDtcclxuICBtaW4taGVpZ2h0OiA1MDBweDtcclxuXHJcbn1cclxuIl19 */
  </style>
</head>
<body>
  <script>
  "use strict";function Calendar(e){var t=e.el,n=e.showControls,a=e.allowAddEvents,r=e.allowRemoveEvents,l=e.className,s=e.title;this.el=t,this.showControls=n,this.allowAddEvents=a,this.allowRemoveEvents=r,this.className=l,this.title=s,this.id=this.el.substring(1),this.run=function(){function e(){var e=localStorage.getItem("calendarData");e=JSON.parse(e),e&&(m=Object.assign({},e),e[u.id]&&(v=e[u.id]))}function t(){var e=document.createElement("span");e.className="btn-control btn-back",e.innerText="<";var t=document.createElement("span");t.className="btn-control btn-forward",t.innerText=">";var n=document.createElement("span");n.className="date",n.innerHTML=c.getFullYear()+"/"+(c.getMonth()+1);var a=document.createElement("h2");a.innerText=u.title;var r=document.createElement("div");r.className="calendar-head",r.appendChild(a);var l=document.createElement("div");u.showControls?l.append(e,n,t):l.append(n),r.append(l),g.appendChild(r)}function n(e){if("btn-control"===e.target.classList[0]){var t;t="btn-forward"===e.target.classList[1]?1:-1,c=new Date(c.setMonth(c.getMonth()+t));var n=g.querySelector("table");n.parentNode.removeChild(n),a()}}function a(){var e=g.querySelector(".date");e.innerHTML=c.getFullYear()+"/"+(c.getMonth()+1);var t=document.createElement("table");t.className="table table-bordered",t.innerHTML="<tbody><tr></tr></tbody>";var n=document.createElement("thead");n.innerHTML;for(var a=document.createElement("tr"),l=["mon","tue","wed","thu","fri","sat","sun"],s=0;s<l.length;s++){var o=document.createElement("th");o.innerHTML=l[s],a.appendChild(o)}n.insertBefore(a,n.childNodes[0]),t.insertBefore(n,t.childNodes[0]);var i=new Date(c.getFullYear(),c.getMonth(),1).getDay();0===i&&(i=7);for(var d=t.querySelector("tbody"),m=1;m<=new Date(c.getFullYear(),c.getMonth()+1,0).getDate();){if(a=t.querySelectorAll("tr"),1===m)for(var s=m;s<i;s++)a[a.length-1].innerHTML+="<td></td>";var v=document.createElement("td");v.innerHTML=m,v.className=1===String(m).length?"0"+m:m,a[a.length-1].appendChild(v),a[a.length-1].childElementCount>6&&(d.innerHTML+="<tr></tr>"),m++}g.appendChild(t),r()}function r(){for(var e in v)if(e.substring(0,8)===c.toISOString().substring(0,8)){var t=g.getElementsByClassName(""+String(e.substring(8,10)));v[e].map(function(e){s(t[0],e)})}}function l(){if("td"===event.target.tagName.toLowerCase()){var e=prompt("What will you do?","Go for a walk");e&&(s(event.target,e),o(event,e))}}function s(e,t){var n=document.createElement("div");n.className="event "+e.className,n.innerHTML=t+'<span class="delete">x</span>',e.appendChild(n)}function o(e,t){var n=c.toISOString().substring(0,8)+e.target.className;if(v[n])v[n].push(t);else{var a=[];a.push(t),v[n]=a}m[u.id]=v,localStorage.setItem("calendarData",JSON.stringify(m))}function i(e){var t=c.toISOString().substring(0,8)+e.target.parentNode.classList[1],n=e.target.parentNode.innerText.slice(0,-1),a=v[t].indexOf(n);v[t].splice(a,1),0===v[t].length&&delete v[t],m[u.id]=v,localStorage.setItem("calendarData",JSON.stringify(m))}function d(){"delete"===event.target.className&&(event.target.parentNode.remove(),i(event))}var c=new Date,m={},v={},u=this,g=document.createElement("div");g.className=u.className+" my-calendar";var h=document.getElementById(u.id);h.appendChild(g);var p=document.createElement("div");p.appen,e(),t(),a(),u.allowAddEvents&&g.addEventListener("dblclick",l),u.allowRemoveEvents&&g.addEventListener("click",d),g.addEventListener("click",n),console.error(JSON.parse(localStorage.getItem("calendarData")))}}
  //# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiQ2FsZW5kYXIiLCJjb25maWciLCJlbCIsInNob3dDb250cm9scyIsImFsbG93QWRkRXZlbnRzIiwiYWxsb3dSZW1vdmVFdmVudHMiLCJjbGFzc05hbWUiLCJ0aXRsZSIsInRoaXMiLCJpZCIsInN1YnN0cmluZyIsInJ1biIsImxvYWRFdmVudHMiLCJjYWxlbmRhckRhdGEiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiSlNPTiIsInBhcnNlIiwiZXZlbnRzQWxsIiwiT2JqZWN0IiwiYXNzaWduIiwic2VsZiIsImV2ZW50cyIsInJlbmRlckhlYWQiLCJsZWZ0QXJyb3ciLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJpbm5lclRleHQiLCJyaWdodEFycm93IiwiZGF0ZSIsImlubmVySFRNTCIsImN1cnJlbnREYXRlIiwiZ2V0RnVsbFllYXIiLCJnZXRNb250aCIsImhlYWREaXYiLCJhcHBlbmRDaGlsZCIsInJvdzIiLCJhcHBlbmQiLCJjYWxlbmRhckRpdiIsImhhbmRsZUJ1dHRvbiIsImV2ZW50IiwidGFyZ2V0IiwiY2xhc3NMaXN0IiwibnVtIiwiRGF0ZSIsInNldE1vbnRoIiwiZGVsZXRlMSIsInF1ZXJ5U2VsZWN0b3IiLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJyZW5kZXJDYWxlbmRhciIsInRhYmxlIiwidGhlYWQiLCJ0ciIsInRoTmFtZSIsImkiLCJsZW5ndGgiLCJ0aCIsImluc2VydEJlZm9yZSIsImNoaWxkTm9kZXMiLCJmaXJzdERheSIsImdldERheSIsInRib2R5IiwiZGF5IiwiZ2V0RGF0ZSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJ0ZCIsIlN0cmluZyIsImNoaWxkRWxlbWVudENvdW50IiwicmVuZGVyRXZlbnRzIiwiZXZlbnREYXRlIiwidG9JU09TdHJpbmciLCJldmVudERheSIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJtYXAiLCJpdGVtIiwicmVuZGVyRXZlbnQiLCJhZGRVc2VyRXZlbnQiLCJ0YWdOYW1lIiwidG9Mb3dlckNhc2UiLCJ0ZXh0IiwicHJvbXB0Iiwic2F2ZUV2ZW50VG9Mb2NhbFN0b3JhZ2UiLCJ3aGVyZSIsImRpdiIsInNhdmVEYXRlIiwicHVzaCIsImFyciIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJkZWxldGVFdmVudEZyb21Mb2NhbFN0b3JhZ2UiLCJkZWxldGVEYXRlIiwic2xpY2UiLCJpbmRleCIsImluZGV4T2YiLCJzcGxpY2UiLCJkZWxldGVVc2VyRXZlbnQiLCJyZW1vdmUiLCJtYWluRGl2IiwiZ2V0RWxlbWVudEJ5SWQiLCJjb250cm9sRGl2IiwiYXBwZW4iLCJhZGRFdmVudExpc3RlbmVyIiwiY29uc29sZSIsImVycm9yIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUFBLFNBQVNBLFVBQVNDLEdBQVEsR0FDaEJDLEdBQTBFRCxFQUExRUMsR0FBSUMsRUFBc0VGLEVBQXRFRSxhQUFjQyxFQUF3REgsRUFBeERHLGVBQWdCQyxFQUF3Q0osRUFBeENJLGtCQUFtQkMsRUFBcUJMLEVBQXJCSyxVQUFXQyxFQUFVTixFQUFWTSxLQUV4RUMsTUFBS04sR0FBS0EsRUFDVk0sS0FBS0wsYUFBZUEsRUFDcEJLLEtBQUtKLGVBQWlCQSxFQUN0QkksS0FBS0gsa0JBQW9CQSxFQUN6QkcsS0FBS0YsVUFBWUEsRUFDakJFLEtBQUtELE1BQVFBLEVBRWJDLEtBQUtDLEdBQUtELEtBQUtOLEdBQUdRLFVBQVUsR0FFNUJGLEtBQUtHLElBQU0sV0FtQ1QsUUFBU0MsS0FDUCxHQUFJQyxHQUFlQyxhQUFhQyxRQUFRLGVBQ3hDRixHQUFlRyxLQUFLQyxNQUFNSixHQUN2QkEsSUFDREssRUFBWUMsT0FBT0MsVUFBWVAsR0FFNUJBLEVBQWFRLEVBQUtaLE1BQ25CYSxFQUFTVCxFQUFhUSxFQUFLWixNQUtqQyxRQUFTYyxLQUNQLEdBQUlDLEdBQVlDLFNBQVNDLGNBQWMsT0FDdkNGLEdBQVVsQixVQUFZLHVCQUN0QmtCLEVBQVVHLFVBQVksR0FFdEIsSUFBSUMsR0FBYUgsU0FBU0MsY0FBYyxP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QWdCeEUsS0FBS3lFLFVBQVV2RSxJQUd0RCxRQUFTOEUsS0FDdUIsV0FBM0J4RCxNQUFNQyxPQUFPbkMsWUFDaEJrQyxNQUFNQyxPQUFPTyxXQUFXaUQsU0FFeEJQLEVBQTRCbEQsUUFwTjlCLEdBQUlULEdBQWMsR0FBSWEsTUFFbEIxQixLQUNBSSxLQUVBRCxFQUFPYixLQUVQOEIsRUFBY2IsU0FBU0MsY0FBYyxNQUN6Q1ksR0FBWWhDLFVBQVllLEVBQUtmLFVBQVksY0FFekMsSUFBSTRGLEdBQVV6RSxTQUFTMEUsZUFBZTlFLEVBQUtaLEdBRTNDeUYsR0FBUS9ELFlBQVlHLEVBQ3BCLElBQUk4RCxHQUFhM0UsU0FBU0MsY0FBYyxNQUN4QzBFLEdBQVdDLE1BRVh6RixJQUVBVyxJQUNBMkIsSUFHRzdCLEVBQUtqQixnQkFDTmtDLEVBQVlnRSxpQkFBaUIsV0FBWXpCLEdBRXhDeEQsRUFBS2hCLG1CQUNOaUMsRUFBWWdFLGlCQUFpQixRQUFTTixHQUd4QzFELEVBQVlnRSxpQkFBaUIsUUFBUy9ELEdBR3RDZ0UsUUFBUUMsTUFBTXhGLEtBQUtDLE1BQU9ILGFBQWFDLFFBQVEiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIENhbGVuZGFyKGNvbmZpZykge1xyXG4gIGNvbnN0IHsgZWwsIHNob3dDb250cm9scywgYWxsb3dBZGRFdmVudHMsIGFsbG93UmVtb3ZlRXZlbnRzLCBjbGFzc05hbWUsIHRpdGxlIH0gPSBjb25maWc7XHJcblxyXG4gIHRoaXMuZWwgPSBlbDtcclxuICB0aGlzLnNob3dDb250cm9scyA9IHNob3dDb250cm9scztcclxuICB0aGlzLmFsbG93QWRkRXZlbnRzID0gYWxsb3dBZGRFdmVudHM7XHJcbiAgdGhpcy5hbGxvd1JlbW92ZUV2ZW50cyA9IGFsbG93UmVtb3ZlRXZlbnRzO1xyXG4gIHRoaXMuY2xhc3NOYW1lID0gY2xhc3NOYW1lO1xyXG4gIHRoaXMudGl0bGUgPSB0aXRsZTtcclxuXHJcbiAgdGhpcy5pZCA9IHRoaXMuZWwuc3Vic3RyaW5nKDEpO1xyXG5cclxuICB0aGlzLnJ1biA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcclxuXHJcbiAgICB2YXIgZXZlbnRzQWxsID0ge307XHJcbiAgICB2YXIgZXZlbnRzID0ge307XHJcblxyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuICAgIHZhciBjYWxlbmRhckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgY2FsZW5kYXJEaXYuY2xhc3NOYW1lID0gc2VsZi5jbGFzc05hbWUgKyAnIG15LWNhbGVuZGFyJztcclxuXHJcbiAgICB2YXIgbWFpbkRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHNlbGYuaWQpO1xyXG5cclxuICAgIG1haW5EaXYuYXBwZW5kQ2hpbGQoY2FsZW5kYXJEaXYpO1xyXG4gICAgdmFyIGNvbnRyb2xEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIGNvbnRyb2xEaXYuYXBwZW5cclxuXHJcbiAgICBsb2FkRXZlbnRzKCk7XHJcblxyXG4gICAgcmVuZGVySGVhZCgpO1xyXG4gICAgcmVuZGVyQ2FsZW5kYXIoKTtcclxuXHJcblxyXG4gICAgaWYoc2VsZi5hbGxvd0FkZEV2ZW50cykge1xyXG4gICAgICBjYWxlbmRhckRpdi5hZGRFdmVudExpc3RlbmVyKCdkYmxjbGljaycsIGFkZFVzZXJFdmVudCk7XHJcbiAgICB9XHJcbiAgICBpZihzZWxmLmFsbG93UmVtb3ZlRXZlbnRzKSB7XHJcbiAgICAgIGNhbGVuZGFyRGl2LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZGVsZXRlVXNlckV2ZW50KTtcclxuICAgIH1cclxuXHJcbiAgICBjYWxlbmRhckRpdi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZUJ1dHRvbik7XHJcblxyXG5cclxuICAgIGNvbnNvbGUuZXJyb3IoSlNPTi5wYXJzZSggbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NhbGVuZGFyRGF0YScpKSk7XHJcblxyXG4gICAgZnVuY3Rpb24gbG9hZEV2ZW50cygpIHtcclxuICAgICAgdmFyIGNhbGVuZGFyRGF0YSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjYWxlbmRhckRhdGEnKTtcclxuICAgICAgY2FsZW5kYXJEYXRhID0gSlNPTi5wYXJzZShjYWxlbmRhckRhdGEpO1xyXG4gICAgICBpZihjYWxlbmRhckRhdGEpIHtcclxuICAgICAgICBldmVudHNBbGwgPSBPYmplY3QuYXNzaWduKHt9LCAgY2FsZW5kYXJEYXRhKTtcclxuXHJcbiAgICAgICAgaWYoY2FsZW5kYXJEYXRhW3NlbGYuaWRdKSB7XHJcbiAgICAgICAgICBldmVudHMgPSBjYWxlbmRhckRhdGFbc2VsZi5pZF07XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gcmVuZGVySGVhZCgpIHtcclxuICAgICAgdmFyIGxlZnRBcnJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcclxuICAgICAgbGVmdEFycm93LmNsYXNzTmFtZSA9ICdidG4tY29udHJvbCBidG4tYmFjayc7XHJcbiAgICAgIGxlZnRBcnJvdy5pbm5lclRleHQgPSAnPCdcclxuXHJcbiAgICAgIHZhciByaWdodEFycm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xyXG4gICAgICByaWdodEFycm93LmNsYXNzTmFtZSA9ICdidG4tY29udHJvbCBidG4tZm9yd2FyZCc7XHJcbiAgICAgIHJpZ2h0QXJyb3cuaW5uZXJUZXh0ID0gJz4nO1xyXG5cclxuICAgICAgdmFyIGRhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcbiAgICAgIGRhdGUuY2xhc3NOYW1lID0gJ2RhdGUnO1xyXG4gICAgICBkYXRlLmlubmVySFRNTCA9IGN1cnJlbnREYXRlLmdldEZ1bGxZZWFyKCkgKyAnLycgKyAoY3VycmVudERhdGUuZ2V0TW9udGgoKSsxKTtcclxuICAgICAgLy8gZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkYXRlKTtcclxuXHJcblxyXG4gICAgICB2YXIgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMicpO1xyXG4gICAgICB0aXRsZS5pbm5lclRleHQgPSBzZWxmLnRpdGxlO1xyXG5cclxuICAgICAgdmFyIGhlYWREaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgaGVhZERpdi5jbGFzc05hbWUgPSAnY2FsZW5kYXItaGVhZCc7XHJcbiAgICAgIGhlYWREaXYuYXBwZW5kQ2hpbGQodGl0bGUpO1xyXG4gICAgICB2YXIgcm93MiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cclxuICAgICAgaWYoc2VsZi5zaG93Q29udHJvbHMpIHtcclxuICAgICAgICByb3cyLmFwcGVuZChsZWZ0QXJyb3csIGRhdGUsIHJpZ2h0QXJyb3cpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJvdzIuYXBwZW5kKGRhdGUpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBoZWFkRGl2LmFwcGVuZChyb3cyKTtcclxuICAgICAgLy8gaGVhZERpdi5pbm5lckhUTUwgKz0gYDxkaXY+JHtsZWZ0QXJyb3d9JHtkYXRlfSR7cmlnaHRBcnJvd308L2Rpdj5gO1xyXG4gICAgICBjYWxlbmRhckRpdi5hcHBlbmRDaGlsZChoZWFkRGl2KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBoYW5kbGVCdXR0b24oZXZlbnQpIHtcclxuICAgICAgaWYoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdFswXSAhPT0gJ2J0bi1jb250cm9sJykgcmV0dXJuO1xyXG4gICAgICB2YXIgbnVtO1xyXG4gICAgICBldmVudC50YXJnZXQuY2xhc3NMaXN0WzFdID09PSAnYnRuLWZvcndhcmQnID8gbnVtID0gMSA6IG51bSA9IC0xXHJcbiAgICAgIGN1cnJlbnREYXRlID0gbmV3IERhdGUoY3VycmVudERhdGUuc2V0TW9udGgoY3VycmVudERhdGUuZ2V0TW9udGgoKSArIG51bSkpO1xyXG5cclxuICAgICAgdmFyIGRlbGV0ZTEgPSBjYWxlbmRhckRpdi5xdWVyeVNlbGVjdG9yKCd0YWJsZScpO1xyXG4gICAgICBkZWxldGUxLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZGVsZXRlMSk7XHJcbiAgICAgIHJlbmRlckNhbGVuZGFyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gcmVuZGVyQ2FsZW5kYXIoKSB7XHJcblxyXG4gICAgICB2YXIgZGF0ZSA9IGNhbGVuZGFyRGl2LnF1ZXJ5U2VsZWN0b3IoJy5kYXRlJyk7XHJcbiAgICAgIGRhdGUuaW5uZXJIVE1MID0gY3VycmVudERhdGUuZ2V0RnVsbFllYXIoKSArICcvJyArIChjdXJyZW50RGF0ZS5nZXRNb250aCgpKzEpO1xyXG5cclxuICAgICAgdmFyIHRhYmxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGFibGUnKTtcclxuICAgICAgdGFibGUuY2xhc3NOYW1lID0gJ3RhYmxlIHRhYmxlLWJvcmRlcmVkJztcclxuICAgICAgdGFibGUuaW5uZXJIVE1MID0gJzx0Ym9keT48dHI+PC90cj48L3Rib2R5Pic7XHJcbiAgICAgIHZhciB0aGVhZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RoZWFkJyk7XHJcbiAgICAgIHRoZWFkLmlubmVySFRNTFxyXG4gICAgICB2YXIgdHIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpO1xyXG4gICAgICB2YXIgdGhOYW1lID0gWydtb24nLCAndHVlJywgJ3dlZCcsICd0aHUnLCAnZnJpJywgJ3NhdCcsICdzdW4nXTtcclxuXHJcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhOYW1lLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdmFyIHRoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGgnKTtcclxuICAgICAgICB0aC5pbm5lckhUTUwgPSB0aE5hbWVbaV07XHJcbiAgICAgICAgdHIuYXBwZW5kQ2hpbGQodGgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGVhZC5pbnNlcnRCZWZvcmUodHIsIHRoZWFkLmNoaWxkTm9kZXNbMF0pO1xyXG5cclxuICAgICAgdGFibGUuaW5zZXJ0QmVmb3JlKHRoZWFkLCB0YWJsZS5jaGlsZE5vZGVzWzBdKTtcclxuXHJcbiAgICAgIHZhciBmaXJzdERheSA9IG5ldyBEYXRlKGN1cnJlbnREYXRlLmdldEZ1bGxZZWFyKCksIGN1cnJlbnREYXRlLmdldE1vbnRoKCksIDEpLmdldERheSgpO1xyXG4gICAgICBpZihmaXJzdERheSA9PT0gMCkgZmlyc3REYXkgPSA3O1xyXG5cclxuICAgICAgdmFyIHRib2R5ID0gdGFibGUucXVlcnlTZWxlY3RvcigndGJvZHknKTtcclxuXHJcbiAgICAgIHZhciBkYXkgPSAxO1xyXG4gICAgICB3aGlsZSAoZGF5IDw9IG5ldyBEYXRlKGN1cnJlbnREYXRlLmdldEZ1bGxZZWFyKCksIChjdXJyZW50RGF0ZS5nZXRNb250aCgpKzEpLCAwKS5nZXREYXRlKCkpIHtcclxuXHJcbiAgICAgICAgdHIgPSB0YWJsZS5xdWVyeVNlbGVjdG9yQWxsKCd0cicpO1xyXG5cclxuICAgICAgICBpZihkYXkgPT09IDEgKSB7XHJcbiAgICAgICAgICBmb3IgKHZhciBpID0gZGF5OyBpIDwgZmlyc3REYXk7IGkrKykge1xyXG4gICAgICAgICAgICB0clt0ci5sZW5ndGgtMV0uaW5uZXJIVE1MICs9ICc8dGQ+PC90ZD4nO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHRkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTtcclxuICAgICAgICB0ZC5pbm5lckhUTUwgPSBkYXk7XHJcbiAgICAgICAgdGQuY2xhc3NOYW1lID0gU3RyaW5nKGRheSkubGVuZ3RoID09PSAxID8gJzAnICsgZGF5IDogZGF5O1xyXG4gICAgICAgIHRyW3RyLmxlbmd0aC0xXS5hcHBlbmRDaGlsZCh0ZCk7XHJcblxyXG4gICAgICAgIGlmKHRyW3RyLmxlbmd0aC0xXS5jaGlsZEVsZW1lbnRDb3VudCA+IDYpIHtcclxuICAgICAgICAgIHRib2R5LmlubmVySFRNTCArPSAnPHRyPjwvdHI+JztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGRheSsrO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjYWxlbmRhckRpdi5hcHBlbmRDaGlsZCh0YWJsZSk7XHJcblxyXG4gICAgICByZW5kZXJFdmVudHMoKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gcmVuZGVyRXZlbnRzKCkge1xyXG4gICAgICBmb3IgKHZhciBldmVudERhdGUgaW4gZXZlbnRzKSB7XHJcbiAgICAgICAgaWYoZXZlbnREYXRlLnN1YnN0cmluZygwLCA4KSA9PT0gY3VycmVudERhdGUudG9JU09TdHJpbmcoKS5zdWJzdHJpbmcoMCwgOCkpIHtcclxuICAgICAgICAgIHZhciBldmVudERheSA9IGNhbGVuZGFyRGl2LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoYCR7U3RyaW5nKGV2ZW50RGF0ZS5zdWJzdHJpbmcoOCwgMTApKX1gKTtcclxuICAgICAgICAgIC8vIHJlbmRlckV2ZW50KGV2ZW50RGF5WzBdLCBldmVudHNbZXZlbnREYXRlXSk7XHJcbiAgICAgICAgICBldmVudHNbZXZlbnREYXRlXS5tYXAoaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIHJlbmRlckV2ZW50KGV2ZW50RGF5WzBdLCBpdGVtKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGFkZFVzZXJFdmVudCgpIHtcclxuICAgICAgaWYoZXZlbnQudGFyZ2V0LnRhZ05hbWUudG9Mb3dlckNhc2UoKSAhPT0gJ3RkJykgcmV0dXJuO1xyXG5cclxuICAgICAgdmFyIHRleHQgPSBwcm9tcHQoJ1doYXQgd2lsbCB5b3UgZG8/JywgJ0dvIGZvciBhIHdhbGsnKTtcclxuXHJcbiAgICAgIGlmKCF0ZXh0KSByZXR1cm47XHJcblxyXG4gICAgICByZW5kZXJFdmVudChldmVudC50YXJnZXQsIHRleHQpO1xyXG4gICAgICBzYXZlRXZlbnRUb0xvY2FsU3RvcmFnZShldmVudCwgdGV4dCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gcmVuZGVyRXZlbnQod2hlcmUsIHRleHQpIHtcclxuICAgICAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICBkaXYuY2xhc3NOYW1lID0gJ2V2ZW50ICcgKyB3aGVyZS5jbGFzc05hbWU7XHJcbiAgICAgIGRpdi5pbm5lckhUTUwgPSBgJHt0ZXh0fTxzcGFuIGNsYXNzPVwiZGVsZXRlXCI+eDwvc3Bhbj5gO1xyXG5cclxuICAgICAgd2hlcmUuYXBwZW5kQ2hpbGQoZGl2KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzYXZlRXZlbnRUb0xvY2FsU3RvcmFnZShldmVudCwgdGV4dCkge1xyXG4gICAgICB2YXIgc2F2ZURhdGUgPSBjdXJyZW50RGF0ZS50b0lTT1N0cmluZygpLnN1YnN0cmluZygwLCA4KSArIGV2ZW50LnRhcmdldC5jbGFzc05hbWU7XHJcblxyXG4gICAgICBpZiAoZXZlbnRzW3NhdmVEYXRlXSkge1xyXG4gICAgICAgIGV2ZW50c1tzYXZlRGF0ZV0ucHVzaCh0ZXh0KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBsZXQgYXJyID0gW107XHJcbiAgICAgICAgYXJyLnB1c2godGV4dCk7XHJcbiAgICAgICAgZXZlbnRzW3NhdmVEYXRlXSA9IGFycjtcclxuICAgICAgfVxyXG5cclxuICAgICAgZXZlbnRzQWxsW3NlbGYuaWRdID0gZXZlbnRzO1xyXG5cclxuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2NhbGVuZGFyRGF0YScsIEpTT04uc3RyaW5naWZ5KGV2ZW50c0FsbCkpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGRlbGV0ZUV2ZW50RnJvbUxvY2FsU3RvcmFnZShldmVudCkge1xyXG4gICAgICB2YXIgZGVsZXRlRGF0ZSA9IGN1cnJlbnREYXRlLnRvSVNPU3RyaW5nKCkuc3Vic3RyaW5nKDAsIDgpICsgZXZlbnQudGFyZ2V0LnBhcmVudE5vZGUuY2xhc3NMaXN0WzFdO1xyXG4gICAgICB2YXIgdGV4dCA9IGV2ZW50LnRhcmdldC5wYXJlbnROb2RlLmlubmVyVGV4dC5zbGljZSgwLCAtMSk7XHJcbiAgICAgIHZhciBpbmRleCA9IGV2ZW50c1tkZWxldGVEYXRlXS5pbmRleE9mKHRleHQpO1xyXG4gICAgICBldmVudHNbZGVsZXRlRGF0ZV0uc3BsaWNlKGluZGV4LCAxKTtcclxuXHJcbiAgICAgIGlmIChldmVudHNbZGVsZXRlRGF0ZV0ubGVuZ3RoID09PSAwKSBkZWxldGUgZXZlbnRzW2RlbGV0ZURhdGVdO1xyXG5cclxuICAgICAgZXZlbnRzQWxsW3NlbGYuaWRdID0gZXZlbnRzO1xyXG5cclxuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2NhbGVuZGFyRGF0YScsIEpTT04uc3RyaW5naWZ5KGV2ZW50c0FsbCkpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGRlbGV0ZVVzZXJFdmVudCgpIHtcclxuICAgICAgaWYoZXZlbnQudGFyZ2V0LmNsYXNzTmFtZSAhPT0gJ2RlbGV0ZScpIHJldHVybjtcclxuICAgICAgZXZlbnQudGFyZ2V0LnBhcmVudE5vZGUucmVtb3ZlKCk7XHJcblxyXG4gICAgICBkZWxldGVFdmVudEZyb21Mb2NhbFN0b3JhZ2UoZXZlbnQpO1xyXG4gICAgfVxyXG4gIH1cclxufSJdfQ==

  </script>
  <script>
    console.dir(window.location);

    var urlParams;


(window.onpopstate = function () {
    var match,
        pl     = /\+/g,  // Regex for replacing addition symbol with a space
        search = /([^&=]+)=?([^&]*)/g,
        decode = function (s) { return decodeURIComponent(s.replace(pl, " ")); },
        query  = window.location.search.substring(1);

    urlParams = {};
    while (match = search.exec(query))
       urlParams[decode(match[1])] = decode(match[2]);
})();

console.log(urlParams);
    // console.log(getParameterByName())
    let { id, showControls, allowAddEvents, allowRemoveEvents, className, title } = urlParams;

    div = document.createElement('div');
    div.id = id;

    document.body.prepend(div);



    showControls = Boolean(showControls);
    allowAddEvents = Boolean(allowAddEvents);
    allowRemoveEvents = Boolean(allowRemoveEvents);


    new Calendar({
      el: '#' + id,
      showControls: showControls,
      allowAddEvents: allowAddEvents,
      allowRemoveEvents: allowRemoveEvents,
      className: className,
      title: title
    }).run();

    // new Calendar({
    //   el: '#' + 'sdjsdjksd',
    //   showControls: true,
    //   allowAddEvents: true,
    //   allowRemoveEvents: true,
    //   className: 'another-calendar-widget',
    //   title: 'Мои другие планы'
    // }).run();
  </script>
</body>
</html>
